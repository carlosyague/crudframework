<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:librae="http://www.librae.org/jsf/facelets">

<ui:composition template="/templates/defaultTemplate.xhtml">
	<ui:define name="title">#{msg['parametroSearch.title']}</ui:define>
	<ui:define name="body.id">parametroSearchAction</ui:define>
	<ui:define name="body">
		<f:view>
			<h:form id="parametroCriteriaForm" onsubmit="$('parametroCriteriaForm:buscar').focus();">
			    <head>
					<script type="text/javascript">
							Event.observe(document, 'keydown', loading_intro_parametro);
							function loading_intro_parametro(event) {
								loading_intro(event, 'parametroCriteriaForm', 'parametroCriteriaForm:buscar');
							}
					</script>
				</head>

				<!-- BREADCRUMB -->
				<librae:executeMethod getter="#{breadCrumbAction.limpiarPath}" />
				<librae:breadCrumbFavoritos favoritoBean="#{menuAction}" />

				<librae:executeMethod getter="#{parametroFormAction.limpiarForm}" id="limpiarForm"/>
				<librae:executeMethod getter="#{parametroFormAction.init}" id="init"/>

				<!-- CONTENIDO -->
				<t:div styleClass="contenido">

					<librae:tabbedPage tabs="#{parametroSearchAction.form.tabGroup}"
						subTabs="#{parametroSearchAction.form.subTabGroup}">
						<librae:tab binding="#{parametroSearchAction.form.tabBuscarUsuario}">

							<t:div styleClass="cuadro">
								<t:div styleClass="cuadro02">
									<t:panelGrid columns="2" columnClasses="anchura5, anchura95"
										headerClass="titular" footerClass="esq02" cellpadding="0"
										cellspacing="0" border="0" width="100%">
										<f:facet name="header">
											<h:outputText value="#{msg['parametroSearch.cuadro']}" />
										</f:facet>

										<h:outputLabel for="codigo"
											value="#{msg['parametroSearch.criteria.codigo']}" />
										<h:panelGroup>
											<h:inputText styleClass="text medium" id="codigo" title="#{msg['parametroSearch.criteria.codigo']}" alt="#{msg['parametroSearch.criteria.codigo']}"
												value="#{parametroSearchAction.form.codigo}" required="false"
												maxlength="40" size="50"/>
											<h:outputLink onclick="$('parametroCriteriaForm:codigo').value=$F('parametroCriteriaForm:codigoParametro');" id="recuperarContextoCodigo" value="#">
												<h:graphicImage border="0" value="/images/ico_recuperar.gif" alt="#{common['button.contexto']}" title="#{common['button.contexto']}"/>
											</h:outputLink>
										</h:panelGroup>

										<f:facet name="footer">
											<h:panelGroup>
												<h:commandLink styleClass="boton_rojo"
													title="#{common['button.clean']}" alt="#{common['button.clean']}"
													action="#{parametroSearchAction.limpiar}">
													<span><h:outputText value="#{common['button.clean']}" /></span>
												</h:commandLink>
												<h:commandLink action="#{parametroSearchAction.buscar}" id="buscar"
													styleClass="boton" title="#{common['button.search']}" alt="#{common['button.search']}">
													<span><h:outputText value="#{common['button.search']}" /></span>
												</h:commandLink>
											</h:panelGroup>
										</f:facet>
									</t:panelGrid>
								</t:div>
							</t:div>

							<h:inputHidden value="#{contextoAction.codigoParametro}" id="codigoParametro"/>

							<h:panelGroup>

								<librae:subTabListado
									binding="#{parametroSearchAction.form.subTabResultados}">

									<t:div styleClass="listado">

										<t:panelGrid columns="2" styleClass="botones">
											<t:panelGroup>
												<t:commandLink action="form" id="add" immediate="true"
													styleClass="btn_barra"
													visibleOnUserRole="ADM_Mantenimiento_Parametro" title="#{common['button.add']}">
													<span><h:outputText value="#{common['button.add']}" /></span>
												</t:commandLink>
											</t:panelGroup>
											<t:panelGroup styleClass="botonfinal">
												<h:commandButton action="#{parametroSearchAction.generarPdf}" immediate="true" styleClass="imprimir" title="#{common['button.pdf']}" image="/images/pdf_icon.gif" alt="#{common['button.pdf']}" />
												<h:commandButton action="#{parametroSearchAction.generarExcel}" immediate="true" styleClass="imprimir" title="#{common['button.excel']}" image="/images/hoja_calculo_icon.gif" alt="#{common['button.excel']}" />

												<t:selectOneMenu id="factorPaginacion"
													styleClass="combo_paginacion" onchange="document.getElementById('_viewRoot:status.start').style.display='';return oamSubmitForm('parametroCriteriaForm','parametroCriteriaForm:cambiarPaginacion');"
													value="#{parametroSearchAction.pageSize}">
													<f:selectItem itemValue="10" itemLabel="10" />
													<f:selectItem itemValue="20" itemLabel="20" />
													<f:selectItem itemValue="30" itemLabel="30" />
													<f:selectItem itemValue="50" itemLabel="50" />
													<!-- f:selectItem itemValue="-1" itemLabel="Todos" / -->
												</t:selectOneMenu>

												<t:commandLink action="#{parametroSearchAction.modificarPageSize}"
													id="cambiarPaginacion" style="display:none;">
													<h:outputText value="." />
												</t:commandLink>
											</t:panelGroup>
										</t:panelGrid>

										<ui:include src="/pages/parametro/dataTable.xhtml">
											<ui:param name="bean" value="#{parametroSearchAction}" />
										</ui:include>

										<ui:include src="/common/paginatorAjax.xhtml">
											<ui:param name="bean" value="#{parametroSearchAction}" />
											<ui:param name="idListado" value="parametros" />
										</ui:include>
									</t:div>
								</librae:subTabListado>
							</h:panelGroup>

						</librae:tab>
					</librae:tabbedPage>
				</t:div>
			</h:form>

			<librae:windowMessages bean="#{parametroSearchAction}" borrar="true" />

		</f:view>
	</ui:define>
</ui:composition>
</html>
