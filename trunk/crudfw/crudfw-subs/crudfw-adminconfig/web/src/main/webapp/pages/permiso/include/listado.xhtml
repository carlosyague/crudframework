<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:librae="http://www.librae.org/jsf/facelets">

	<h:form id="permisoCriteriaForm">

		<ui:include src="/common/breadCrumbPopUp.xhtml"/>

		<t:div styleClass="contenido">
			<librae:tabbedPage tabs="#{bean.form.tabGroup}"
				subTabs="#{bean.form.subTabGroup}">
				<librae:tab binding="#{bean.form.tabListado}">

					<t:div styleClass="cuadro">
						<t:div styleClass="cuadro02">

							<t:panelGrid columns="2" columnClasses="anchura5" headerClass="titular"
								footerClass="esq02" cellpadding="0" cellspacing="0" border="0"
								width="100%">

								<f:facet name="header">
									<h:outputText value="#{msg['biblioteca.busqueda']}" />
								</f:facet>

								<h:outputLabel for="codigo" value="#{msg['permiso.codigo']}" />
								<h:panelGroup>
									<h:inputText styleClass="text medium" size="20" id="codigo"
										value="#{bean.form.codigo}"
										required="false" maxlength="80" />
								</h:panelGroup>

								<h:outputLabel for="nombre" value="#{msg['permiso.nombre']}" />
								<h:panelGroup>
									<h:inputText styleClass="text medium" size="20" id="nombre"
										value="#{bean.form.nombre}"
										required="false" maxlength="80" />
								</h:panelGroup>

								<h:outputLabel for="categoriaPermiso" value="#{msg['rol.categorias']}" />
								<h:selectOneMenu id="categoriaPermiso" value="#{bean.form.categoriaPermiso}">
									<f:selectItem itemValue="0" itemLabel="#{common['select.seleccione']}"/>
									<f:selectItems value="#{comboAction.categoriasPermiso}" />
								</h:selectOneMenu>

								<t:saveState id="saveCategoriasPermisos" value="#{comboAction.categoriasPermiso}" />
								<h:inputHidden value="#{bean.form.idRol}" id="idRol"/>
								<t:saveState id="idRolSave" value="#{bean.form.idRol}" />

								<f:facet name="footer">
									<h:panelGroup>
										<h:commandLink styleClass="boton_rojo"
											title="#{common['button.clean']}" alt="#{common['button.clean']}"
											action="#{bean.limpiar}">
											<span><h:outputText value="#{common['button.clean']}" /></span>
										</h:commandLink>
										<h:commandLink action="#{bean.buscar}" id="buscar" styleClass="boton"
											title="#{common['button.search']}" alt="#{common['button.search']}">
											<span><h:outputText value="#{common['button.search']}" /></span>
										</h:commandLink>
									</h:panelGroup>
								</f:facet>
							</t:panelGrid>
						</t:div>
					</t:div>

					<h:outputText value=" " />
					<h:outputText value=" " />
					<h:outputText value=" " />

					<!-- SUBPESTAÃ‘A 1 -->
					<librae:subTabListado binding="#{bean.form.subTabResults}">

						<t:div styleClass="listado">

							<t:panelGrid columns="2" styleClass="botones">

								<t:panelGroup>
									<span class="btn_barra">
										<t:selectBooleanCheckbox styleClass="btn_st" forceId="true" id="selectAll"
										value="#{bean.selectedAll}" onclick="actualizarSeleccionTodos(this, '#{idListado}', 'selectAllPage');" />
										<em id="btn_st1">
											<h:outputText value="#{common['button.selectAll']}" />
										</em>
										<em style="display: none;" id="btn_st2">
											<h:outputText value="#{common['button.deselectAll']}" />
										</em>
									</span>
								</t:panelGroup>

								<t:panelGroup styleClass="botonfinal">

									<h:commandButton action="#{bean.generarPdf}" immediate="true" styleClass="imprimir" title="#{common['button.pdf']}" image="/images/pdf_icon.gif" alt="#{common['button.pdf']}" />
									<h:commandButton action="#{bean.generarExcel}" immediate="true" styleClass="imprimir" title="#{common['button.excel']}" image="/images/hoja_calculo_icon.gif" alt="#{common['button.excel']}" />
									<t:selectOneMenu id="factorPaginacion"
										styleClass="combo_paginacion" onchange="document.getElementById('_viewRoot:status.start').style.display='';return oamSubmitForm('permisoCriteriaForm','permisoCriteriaForm:cambiarPaginacion');"
										value="#{bean.pageSize}">
										<f:selectItem itemValue="10" itemLabel="10" />
										<f:selectItem itemValue="20" itemLabel="20" />
										<f:selectItem itemValue="30" itemLabel="30" />
										<f:selectItem itemValue="50" itemLabel="50" />
										<!-- f:selectItem itemValue="-1" itemLabel="Todos" / -->
									</t:selectOneMenu>
									<t:commandLink action="#{bean.modificarPageSize}"
											id="cambiarPaginacion" style="display:none;">
											<h:outputText value="." />
										</t:commandLink>
								</t:panelGroup>
							</t:panelGrid>

							<ui:include src="/pages/permiso/dataTable.xhtml">
								<ui:param name="bean" value="#{bean}" />
								<ui:param name="idListado" value="#{idListado}" />
							</ui:include>

							<ui:include src="/common/paginatorAjax.xhtml">
								<ui:param name="bean" value="#{bean}" />
								<ui:param name="idListado" value="#{idListado}" />
							</ui:include>

							<t:panelGroup rendered="#{localizador!=null}">
								<t:commandLink id="btnCancelar"  immediate="true" styleClass="boton_rojo"
										onclick="parent.limpiarPermiso();javascript:parent.cerrar()"
										title="#{common['button.cancel']}">
									<span><h:outputText value="#{common['button.back']}" /></span>
								</t:commandLink>

								<h:outputLink styleClass="boton_verde" title="#{common['button.done']}"
									 	id="seleccionarPermiso" onclick="parent.cargarPermiso();javascript:parent.cerrar();">
									<span><h:outputText value="#{common['button.done']}" /></span>
								</h:outputLink>
							</t:panelGroup>
						</t:div>

					</librae:subTabListado>
				</librae:tab>
			</librae:tabbedPage>
		</t:div>
	</h:form>

	<librae:windowMessages bean="#{bean}" borrar="true" />

</html>
