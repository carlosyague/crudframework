<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:librae="http://www.librae.org/jsf/facelets">

<ui:composition template="/templates/defaultTemplate.xhtml">
	<ui:define name="title">#{msg['catalogo.title']}</ui:define>
	<ui:define name="body.id">catalogoListAction</ui:define>
	<ui:define name="body">
		<f:view>
			<librae:executeMethod getter="#{catalogoFormAction.init}" />

			<h:form id="catalogoCriteriaForm" onsubmit="$('catalogoCriteriaForm:buscar').focus();">
			       <head>
						<script type="text/javascript">
							Event.observe(document, 'keydown', loading_intro_catalogo);
							function loading_intro_catalogo(event) {
								loading_intro(event, 'catalogoCriteriaForm', 'catalogoCriteriaForm:buscar');
							}
						</script>
					</head>

				<librae:executeMethod getter="#{breadCrumbAction.limpiarPath}" />
				<librae:breadCrumbFavoritos favoritoBean="#{menuAction}" />

				<t:div styleClass="contenido">
					<librae:tabbedPage tabs="#{catalogoListAction.form.tabGroup}"
						subTabs="#{catalogoListAction.form.subTabGroup}">
						<librae:tab binding="#{catalogoListAction.form.tabListado}">
							<t:div styleClass="cuadro">
								<t:div styleClass="cuadro02">
									<t:panelGrid columns="2" columnClasses="anchura5, anchura95"
										headerClass="titular" footerClass="esq02" cellpadding="0"
										cellspacing="0" border="0" width="100%">
										<f:facet name="header">
											<h:outputText value="#{msg['catalogo.pathText']}" />
										</f:facet>

										<h:outputLabel for="catalogo"
											value="#{msg['catalogoSearch.codigo']}" />
										<h:panelGroup>
											<h:inputText styleClass="text medium" size="60" id="codigo" title="#{msg['catalogoSearch.codigo']}"
												value="#{catalogoListAction.form.codigo}" required="false" />
											<h:outputLink onclick="$('catalogoCriteriaForm:codigo').value=$F('catalogoCriteriaForm:codigoCatalogo');" id="recuperarContextoCodigo" value="#">
												<h:graphicImage border="0" value="/images/ico_recuperar.gif" alt="#{common['button.contexto']}" title="#{common['button.contexto']}"/>
											</h:outputLink>
										</h:panelGroup>

										<h:outputLabel for="catalogo"
											value="#{msg['catalogoSearch.nombre']}" />
										<h:panelGroup>
											<h:inputText styleClass="text medium" size="60" id="nombre" title="#{msg['catalogoSearch.nombre']}"
												value="#{catalogoListAction.form.nombre}" required="false" />
										</h:panelGroup>

										<f:facet name="footer">
											<h:panelGroup>
												<h:commandLink styleClass="boton_rojo"
													title="#{common['button.clean']}"
													action="#{catalogoListAction.limpiar}">
													<span><h:outputText
														value="#{common['button.clean']}" /></span>
												</h:commandLink>
												<h:commandLink action="#{catalogoListAction.buscar}"
													id="buscar" styleClass="boton" title="#{common['button.search']}">
													<span><h:outputText
														value="#{common['button.search']}" /></span>
												</h:commandLink>
											</h:panelGroup>
										</f:facet>
									</t:panelGrid>
								</t:div>
							</t:div>

							<h:inputHidden value="#{contextoAction.codigoCatalogo}" id="codigoCatalogo"/>
							<h:panelGroup>
								<librae:subTabListado
									binding="#{catalogoListAction.form.subTabResults}">
									<t:div styleClass="listado">

										<t:panelGrid columns="2" styleClass="botones">
											<t:panelGroup>
												<t:commandLink action="form" id="add" immediate="true"
													styleClass="btn_barra" title="#{common['button.add']}"
													visibleOnUserRole="ADM_Mantenimiento_Catalogo">
													<span><h:outputText value="#{common['button.add']}" /></span>
												</t:commandLink>
											</t:panelGroup>

											<t:panelGroup styleClass="botonfinal">

												<h:commandButton action="#{catalogoListAction.generarPdf}" immediate="true" styleClass="imprimir" title="#{common['button.pdf']}" image="/images/pdf_icon.gif" alt="#{common['button.pdf']}" />
												<h:commandButton action="#{catalogoListAction.generarExcel}" immediate="true" styleClass="imprimir" title="#{common['button.excel']}" image="/images/hoja_calculo_icon.gif" alt="#{common['button.excel']}" />

												<t:selectOneMenu id="factorPaginacion"
													styleClass="combo_paginacion" onchange="document.getElementById('_viewRoot:status.start').style.display='';return oamSubmitForm('catalogoCriteriaForm','catalogoCriteriaForm:cambiarPaginacion');"
													value="#{catalogoListAction.pageSize}">
													<f:selectItem itemValue="10" itemLabel="10" />
													<f:selectItem itemValue="20" itemLabel="20" />
													<f:selectItem itemValue="30" itemLabel="30" />
													<f:selectItem itemValue="50" itemLabel="50" />
													<!-- f:selectItem itemValue="-1" itemLabel="Todos" / -->
												</t:selectOneMenu>



												<t:commandLink action="#{catalogoListAction.modificarPageSize}"
													id="cambiarPaginacion" style="display:none;">
													<h:outputText value="." />
												</t:commandLink>



											</t:panelGroup>
										</t:panelGrid>

										<ui:include src="dataTable.xhtml">
											<ui:param name="bean" value="#{catalogoListAction}" />
										</ui:include>

										<ui:include src="/common/paginatorAjax.xhtml">
											<ui:param name="bean" value="#{catalogoListAction}" />
											<ui:param name="idListado" value="catalogos" />
										</ui:include>
									</t:div>
								</librae:subTabListado>
							</h:panelGroup>
						</librae:tab>
					</librae:tabbedPage>
				</t:div>
				<h:outputText value="#{catalogoListAction.init}" id="init"/>
			</h:form>
			<librae:windowMessages bean="#{catalogoListAction}" borrar="true" />
		</f:view>
	</ui:define>
</ui:composition>
</html>