<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:v="http://corejsf.com/validator"
	xmlns:s="http://myfaces.apache.org/sandbox"
	xmlns:librae="http://www.librae.org/jsf/facelets">

<ui:composition template="/templates/defaultTemplate.xhtml">
	<ui:define name="title">#{msg['biblioteca.title']}</ui:define>
	<ui:define name="body.id">bibliotecaFormAction</ui:define>

	<ui:define name="body">
		<f:view>
			<h:outputText value="#{bibliotecaFormAction.init}"/>
			<h:form id="bibliotecaForm" enctype="multipart/form-data">

			<!-- BREADCRUMB -->
			<librae:breadCrumb />

			<t:saveState id="saveCreacion" value="#{bibliotecaFormAction.form.creacion}" />
			<t:panelGrid columns="1" styleClass="ruta" columnClasses="path,fechahora" cellpadding="0" cellspacing="0" border="0" rendered="#{!bibliotecaFormAction.form.creacion and !sinEdicion}" onclick="$('bibliotecaForm:horario').disabled=false;$('bibliotecaForm:calendario').disabled=false;$('bibliotecaForm:domicilio').disabled=false;">
				<t:panelGroup visibleOnUserRole="ADM_Eliminar_Biblioteca">
					<h:outputLink value="#" id="delete" styleClass="btn_barra"
							title="#{common['button.remove']}" onclick="dialogo1Var.show();">
						<strong><h:outputText value="#{common['button.remove']}" /></strong>
					</h:outputLink>
				</t:panelGroup>
			</t:panelGrid>

			<!-- CONTENIDO -->
			<t:div styleClass="contenido">
				<librae:tabbedPageSimple tabs="#{bibliotecaFormAction.form.tabGroup}">
					<librae:tab binding="#{bibliotecaFormAction.form.tabBiblioteca}">
						<ui:include src="/pages/biblioteca/include/biblioteca/formBiblioteca.xhtml">
							<ui:param name="sinEdicion" value="false" />
						</ui:include>
					</librae:tab>

					<librae:tab binding="#{bibliotecaFormAction.form.tabPolPrest}">
						<ui:include src="/pages/biblioteca/include/polPrest.xhtml">
							<ui:param name="sinEdicion" value="false" />
						</ui:include>
					</librae:tab>

					<librae:tab binding="#{bibliotecaFormAction.form.tabCodigos}">
						<ui:include src="/pages/biblioteca/include/codigos/list.xhtml">
							<ui:param name="sinEdicion" value="false" />
						</ui:include>
					</librae:tab>

					<librae:tab binding="#{bibliotecaFormAction.form.tabParametros}">
						<ui:include src="/pages/biblioteca/include/parametros.xhtml">
							<ui:param name="sinEdicion" value="false" />
						</ui:include>
					</librae:tab>
				</librae:tabbedPageSimple>

			</t:div>
			<t:div id="divConfirmacionBorrar" style="display: none;">
				<s:modalDialog  dialogId="dialogo2"  dialogVar="dialogo1Var"
					      dialogAttr="bgColor='white' bgOpacity='0.5' toggle='fade' toggleDuration='50'"
					      hiderIds="btnCerrar">
				        <t:panelGrid border="0" columns="1" styleClass="ventanaEmergente">
					    	<t:outputText id="msg"  value="#{msg['confirmacion.biblioteca']}" style="text-align:center;"/>
					    	<t:panelGroup>
					        	<t:panelGrid border="0" columns="2">
							        <t:commandLink action="#{bibliotecaFormAction.delete}" id="editD" immediate="true" styleClass="btn_barra">
										<t:htmlTag value="span"><h:outputText value="#{common['button.remove']}" /></t:htmlTag>
									</t:commandLink>
							        <t:commandButton id="btnCerrar" forceId="true" onclick="dialogo1Var.hide();" styleClass="btn_barra_cerrar" value="#{common['button.cancel']}"/>
					        	</t:panelGrid>
				        	</t:panelGroup>
				        </t:panelGrid>
				</s:modalDialog>
			</t:div>
		</h:form>

		<!-- WINDOW MESSAGES -->
		<librae:windowMessages bean="#{bibliotecaFormAction}" borrar="true" />

		</f:view>
	</ui:define>
</ui:composition>
</html>