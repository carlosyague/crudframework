<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:librae="http://www.librae.org/jsf/facelets">
<t:div styleClass="arbol">
	<t:div styleClass="dtree">
			<script type="text/javascript">
			//<![CDATA[
				var page = '#{page}';
	  		//]]>
	  	</script>
		<librae:arbol value="#{beanTreeData.treeData}" var="node" varNodeToggler="true" clientSideToggle="true" showRootNode="false" showNav="true" showLines="true" id="t">
			<f:facet name="bibliotecas">
				<h:outputText value="#{node.description}" />
			</f:facet>
			<f:facet name="grupos">
				<h:panelGroup>
						<t:graphicImage value="/images/tree/ico_grupobiblioteca.jpg" />
						<h:outputText value="#{node.description}" />
					</h:panelGroup>
			</f:facet>
			<f:facet name="biblioteca">
				<h:panelGroup>
						<t:graphicImage value="/images/tree/ico_biblioteca.jpg" />
						<h:outputText value="#{node.description}" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="sucursal">
					<t:htmlTag value="span" styleClass="S" forceId="true" id="S">
						<t:commandLink styleClass="tB_#{node.identifier}" action="#{beanNodoClick.nodoClick}" rendered="#{readOnly=='false'}">
							<f:param name="nodoClicked" value="#{node.identifier}" assignTo="#{beanNodoClick.nodoClicked}"/>
								<t:htmlTag value="span"><h:outputText value="#{node.description}" /></t:htmlTag>
						</t:commandLink>
						<h:outputLink styleClass="tB_#{node.identifier}" value="#" rendered="#{readOnly=='true'}" onClick="return false;">
							<t:htmlTag value="strong"><h:outputText value="#{node.description}" /></t:htmlTag>
						</h:outputLink>
					</t:htmlTag>
			</f:facet>
		</librae:arbol>
		<script type="text/javascript">
			//<![CDATA[
				seleccionarRama('tB', '#{beanNodoClick.nodoClicked}');
				arbolActivo=!#{readOnly};
	  		//]]>
	  	</script>
 		</t:div>
</t:div>
<a4j:commandLink id="seleccionarNodo" reRender="#{renderizar}" action="#{beanNodoClick.nodoClick}" style="display:none;">
	<a4j:actionparam name="nodoClicked" value="0" assignTo="#{beanNodoClick.nodoClicked}" noEscape="true"/>
</a4j:commandLink>
</html>