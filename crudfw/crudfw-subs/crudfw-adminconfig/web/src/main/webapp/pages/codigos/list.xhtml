<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:librae="http://www.librae.org/jsf/facelets">

<ui:composition template="/templates/defaultTemplate.xhtml">
	<ui:define name="title">#{msg['gestionCodigosSearch.title']}</ui:define>
	<ui:define name="body.id">codigoSearchAction</ui:define>
	<ui:define name="body">
		<f:view>
			<h:form id="codigoCriteriaForm" onsubmit="$('codigoCriteriaForm:buscar').focus();">
			   <head>
					<script type="text/javascript">
							Event.observe(document, 'keydown', loading_intro_codigo);
							function loading_intro_codigo(event) {
								loading_intro(event, 'codigoCriteriaForm', 'codigoCriteriaForm:buscar');
							}
					</script>
			   </head>

				<librae:executeMethod getter="#{breadCrumbAction.limpiarPath}" />
				<librae:breadCrumbFavoritos favoritoBean="#{menuAction}" />
				<librae:executeMethod getter="#{codigoSearchAction.init}" id="init"/>

				<t:div styleClass="contenido">
					<t:div styleClass="pestana1">
						<t:panelGrid columns="3" styleClass="pestanas"
							columnClasses="blank,titulo_activa" cellpadding="0"
							cellspacing="0" border="0">
							<h:graphicImage value="/images/p01b.gif" />
							<h:outputText value="#{msg['gestionCodigosSearch.tab']}" />
							<h:graphicImage value="/images/p02b.gif" />
						</t:panelGrid>

						<t:div styleClass="pestana">
							<t:div styleClass="cuadro">
								<t:div styleClass="cuadro02">
									<t:panelGrid columns="3" columnClasses="columnLabel"
										headerClass="titular" footerClass="esq02" cellpadding="0"
										cellspacing="0" border="0" width="100%">
										<f:facet name="header">
											<h:outputText value="#{msg['gestionCodigosSearch.cuadro']}" />
										</f:facet>

										<h:outputLabel for="tipoCodigo"
											value="#{msg['gestionCodigosSearch.criteria.tipoCodigo']}" />
										<h:selectOneMenu id="tipoCodigo"
											value="#{codigoSearchAction.form.tipoCodigo}">
											<f:selectItems value="#{comboAction.tiposCodigo}" />
										</h:selectOneMenu>
										<t:saveState id="saveTiposCodigo"
											value="#{comboAction.tiposCodigo}" />

										<f:facet name="footer">
											<h:panelGroup>
												<h:commandLink styleClass="boton_rojo"
													title="#{common['button.clean']}"
													action="#{codigoSearchAction.limpiar}">
													<span><h:outputText
														value="#{common['button.clean']}" /></span>
												</h:commandLink>

												<h:commandLink action="#{codigoSearchAction.buscar}" id="buscar"
													styleClass="boton" title="#{common['button.search']}">
													<span><h:outputText
														value="#{common['button.search']}" /></span>
												</h:commandLink>
											</h:panelGroup>
										</f:facet>
									</t:panelGrid>
								</t:div>
							</t:div>

							<h:panelGroup>
								<t:div id="subpestana1">
									<t:div styleClass="listado">
										<t:panelGrid columns="1" styleClass="border_subpest">
											<t:panelGrid columns="3" styleClass="subpestanas" border="0"
												cellpadding="0" cellspacing="0"
												columnClasses="blank,titulo_activa,blank">
												<h:graphicImage value="/images/sp01a.gif" />
												<h:outputText
													value="#{msg['gestionCodigosSearch.resultadosListado']}" />
												<h:graphicImage value="/images/sp02a.gif" />
											</t:panelGrid>
										</t:panelGrid>

										<t:panelGrid styleClass="botones" columns="2">
											<t:panelGrid>
												<t:commandLink action="add" id="add" styleClass="btn_barra"
													visibleOnUserRole="ADM_Mantenimiento_Codigo" title="#{common['button.add']}">
													<span> <h:outputText value="#{common['button.add']}" />
													</span>
												</t:commandLink>
											</t:panelGrid>

											<t:panelGroup styleClass="botonfinal">

												<h:commandButton action="#{codigoSearchAction.generarPdf}" immediate="true" styleClass="imprimir" title="#{common['button.pdf']}" image="/images/pdf_icon.gif" alt="#{common['button.pdf']}" />
												<h:commandButton action="#{codigoSearchAction.generarExcel}" immediate="true" styleClass="imprimir" title="#{common['button.excel']}" image="/images/hoja_calculo_icon.gif" alt="#{common['button.excel']}" />

												<t:selectOneMenu id="factorPaginacion"
													styleClass="combo_paginacion"
													onchange="document.getElementById('_viewRoot:status.start').style.display='';return oamSubmitForm('codigoCriteriaForm','codigoCriteriaForm:cambiarPaginacion');"
													value="#{codigoSearchAction.pageSize}">
													<f:selectItem itemValue="10" itemLabel="10" />
													<f:selectItem itemValue="20" itemLabel="20" />
													<f:selectItem itemValue="30" itemLabel="30" />
													<f:selectItem itemValue="50" itemLabel="50" />
													<!-- f:selectItem itemValue="-1" itemLabel="Todos" / -->
												</t:selectOneMenu>
												<t:commandLink
													action="#{codigoSearchAction.modificarPageSize}"
													id="cambiarPaginacion" style="display:none;">
													<h:outputText value="." />
												</t:commandLink>



											</t:panelGroup>
										</t:panelGrid>

										<ui:include src="/pages/codigos/dataTable.xhtml">
											<ui:param name="bean" value="#{codigoSearchAction}" />
										</ui:include>

										<ui:include src="/common/paginatorAjax.xhtml">
											<ui:param name="bean" value="#{codigoSearchAction}" />
											<ui:param name="idListado" value="codigos" />
										</ui:include>

									</t:div>
								</t:div>
							</h:panelGroup>

						</t:div>
					</t:div>

					<t:div styleClass="pie_pestana">
						<t:panelGrid columns="3" columnClasses="blank,blanco,blank"
							cellpadding="0" cellspacing="0" border="0">
							<h:graphicImage value="/images/pie01.gif" />
							<h:outputText value="" />
							<h:graphicImage value="/images/pie02.gif" />
						</t:panelGrid>
					</t:div>

				</t:div>
				<h:outputText value="#{codigoSearchAction.init}" id="init" />

			</h:form>

			<librae:windowMessages bean="#{codigoSearchAction}" borrar="true" />

		</f:view>
	</ui:define>
</ui:composition>
</html>