<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:librae="http://www.librae.org/jsf/facelets">

	<t:panelGrid columns="2" styleClass="botones">
		<t:panelGroup styleClass="botonfinal">
			<h:commandButton action="#{bean.generarPdf}" immediate="true" styleClass="imprimir" title="#{common['button.pdf']}" image="/images/pdf_icon.gif" alt="#{common['button.pdf']}" />
			<h:commandButton action="#{bean.generarExcel}" immediate="true" styleClass="imprimir" title="#{common['button.excel']}" image="/images/hoja_calculo_icon.gif" alt="#{common['button.excel']}" />
			<t:selectOneMenu id="factorPaginacion" styleClass="combo_paginacion"
							 value="#{bean.pageSize}"
							 onchange="document.getElementById('_viewRoot:status.start').style.display='';return oamSubmitForm('horarioIntForm','horarioIntForm:cambiarPaginacion');" forceId="true">
				<f:selectItem itemValue="10" itemLabel="10" />
				<f:selectItem itemValue="20" itemLabel="20" />
				<f:selectItem itemValue="30" itemLabel="30" />
				<f:selectItem itemValue="50" itemLabel="50" />
				<!-- f:selectItem itemValue="-1" itemLabel="Todos" / -->
			</t:selectOneMenu>
			<t:commandLink action="#{bean.modificarPageSize}"
							id="cambiarPaginacion" style="display:none;">
							<h:outputText value="." />
			</t:commandLink>
		</t:panelGroup>
	</t:panelGrid>
	<librae:listado id="intervalos" var="intHor" value="#{bean.listado}" sortColumn="#{bean.sortColumn}"
	sortAscending="#{bean.ascending}" styleClass="listado" headerClass="standardTable_Header" rowClasses="impar,par" >

		<t:column id="intHor_horaInicio">
			<f:facet name="header">
				<t:commandSortHeader columnName="horaInicio" arrow="true">
					<a4j:commandLink reRender="intervalos, paginacion" value="#{msg['intHor.horaInicio']}">
						<a4j:actionparam name="sortColumn" value="horaInicio" assignTo="#{bean.sortColumn}"/>
						<a4j:actionparam name="ascending"  value="#{!bean.ascending}" assignTo="#{bean.ascending}" />
						<f:param name="ordenarListado" value="true" />
					</a4j:commandLink>
				</t:commandSortHeader>
			</f:facet>
			<t:outputText value="#{intHor.horaInicio}" escape="true" converter="horarioTimeConverter"/>
		</t:column>
		<t:column id="intHor_horaFin">
			<f:facet name="header">
				<t:commandSortHeader columnName="horaFin" arrow="true">
					<a4j:commandLink reRender="intervalos, paginacion" value="#{msg['intHor.horaFin']}">
						<a4j:actionparam name="sortColumn" value="horaFin" assignTo="#{bean.sortColumn}"/>
						<a4j:actionparam name="ascending"  value="#{!bean.ascending}" assignTo="#{bean.ascending}" />
						<f:param name="ordenarListado" value="true" />
					</a4j:commandLink>
				</t:commandSortHeader>
			</f:facet>
			<t:outputText value="#{intHor.horaFin}" escape="true" converter="horarioTimeConverter"/>
		</t:column>
		<t:column style="width: 30" rendered="#{!bean.form.readMode}">
			<f:facet name="header" style="center">
			</f:facet>

			<h:commandLink id="eliminarLink" action="#{bean.eliminarIntervalo}" title="#{common['button.remove']}">
				<h:graphicImage border="0" value="/images/eliminar_icon.png" alt="#{msg['horarioIntFormAction.alt.eliminar']}" />
				<f:param name="procesarListado" value="true" />
				<f:param name="key" value="#{bean.pos}"/>
				<f:param name="from" value="/pages/horarioInt/form.xhtml"/>
            </h:commandLink>
		</t:column>
	</librae:listado>
	<ui:include src="/common/paginatorAjaxSession.xhtml">
		<ui:param name="bean" value="#{bean}" />
		<ui:param name="idListado" value="intervalos" />
		<ui:param name="idPageSize" value="$F('factorPaginacion')" />
	</ui:include>
</html>