<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:librae="http://www.librae.org/jsf/facelets"
	xmlns:s="http://myfaces.apache.org/sandbox"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax">

<ui:composition template="/templates/defaultTemplate.xhtml">
	<ui:define name="title">#{msg['codigoForm.title']}</ui:define>
	<ui:define name="body.id">codigoForm</ui:define>
	<ui:define name="body">
		<f:view>

			<script type="text/javascript">
				//<![CDATA[

				function verAplica () {
    				if ($('codigoForm:tipoCodigo').options[$('codigoForm:tipoCodigo').selectedIndex].text=='Biblioteca') {
    					$('codigoForm:aplicaA').show();
						$('codigoForm:labelAplica').show();
    				} else {
    			        $('codigoForm:aplicaA').hide();
						$('codigoForm:labelAplica').hide();
    				}
    			}
    			//]]>
    		</script>

			<h:form id="codigoForm">

				<librae:breadCrumb />

				<t:saveState id="saveCodigoReadMode" value="#{codigoFormAction.codigoForm.readMode}" />
				<librae:executeMethod getter="#{codigoFormAction.loadCodigo}" />

				<t:panelGrid columns="1" styleClass="ruta" columnClasses="path,fechahora" cellpadding="0" cellspacing="0" border="0" rendered="#{codigoFormAction.codigoForm.idCodigo != null}">
					<t:panelGroup visibleOnUserRole="ADM_Eliminar_Codigo">
						<t:saveState id="saveCodigoId" value="#{codigoFormAction.codigoForm.idCodigo}" />
						<h:outputLink value="#" id="delete" styleClass="btn_barra"
							 title="#{common['button.remove']}" onclick="dialogo1Var.show();">
							<strong><h:outputText value="#{common['button.remove']}" /></strong>
						</h:outputLink>
					</t:panelGroup>
				</t:panelGrid>

				<t:div styleClass="contenido">
					<t:div styleClass="pestana1">
						<t:panelGrid columns="4" styleClass="pestanas" columnClasses="blank,titulo_activa" cellpadding="0" cellspacing="0" border="0">
							<h:graphicImage value="/images/p01b.gif" />
							<h:outputText value="#{msg['codigoForm.tab']}" />
							<a4j:status>
								<f:facet name="start">
									 <h:graphicImage value="/images/ajax-loader01.gif" />
								</f:facet>
							</a4j:status>
							<h:graphicImage value="/images/p02b.gif" />
						</t:panelGrid>

						<t:div styleClass="pestana">
							<t:div styleClass="cuadro">
								<t:div styleClass="cuadro02">
									<t:panelGrid columns="2" columnClasses="columnLabel" headerClass="titular" footerClass="esq02" cellpadding="0" cellspacing="0" border="0" width="100%">
										<f:facet name="header">
											<h:outputText value="#{msg['codigoForm.cuadro']}" />
										</f:facet>

										<h:outputLabel for="tipoCodigo" value="#{msg['codigoForm.tipoCodigo']}" />
										<h:panelGroup>
											<h:selectOneMenu id="tipoCodigo" value="#{codigoFormAction.codigoForm.tipoCodigo}" disabled="#{codigoFormAction.codigoForm.readMode}" onclick="verAplica();">
												<f:selectItems value="#{comboAction.tiposCodigo}" />
											</h:selectOneMenu>
											<t:saveState id="saveTiposCodigo" value="#{comboAction.tiposCodigo}" />
										</h:panelGroup>

										<h:outputLabel for="codigo" value="#{msg['codigo.codigo']}" />
										<h:panelGroup>
											<h:inputText styleClass="text medium" size="25" id="codigo" value="#{codigoFormAction.codigoForm.codigo}" required="true" maxlength="255" disabled="#{codigoFormAction.codigoForm.readMode}" />
											<t:message for="codigo" styleClass="fieldError" detailFormat="{1} #{common['required']}." showSummary="false" showDetail="true" />
										</h:panelGroup>

										<h:outputLabel for="nombre" value="#{msg['codigo.nombre']}" />
										<h:panelGroup>
											<h:inputText styleClass="text medium" size="25" id="nombre" value="#{codigoFormAction.codigoForm.nombre}" maxlength="40" disabled="#{codigoFormAction.codigoForm.readMode}" />
											<t:message for="nombre" styleClass="fieldError" detailFormat="{1} #{common['required']}." showSummary="false" showDetail="true" />
										</h:panelGroup>

										<h:panelGroup id="labelAplica">
											<t:outputLabel for="aplica" value="#{msg['codigoForm.aplicaA']}" />
										</h:panelGroup>
										<h:panelGroup id="aplicaA">
											<h:selectManyCheckbox id="aplica" value="#{codigoFormAction.codigoForm.tiposBiblioteca}" styleClass="text medium nobg tablecheck" size="100" disabled="#{codigoFormAction.codigoForm.readMode}">
												<f:selectItems value="#{comboAction.tiposBiblioteca}"/>
											</h:selectManyCheckbox>
										</h:panelGroup>
										<f:facet name="footer">
											<h:panelGroup>
												<h:outputLink value="/librae-adminconfig/pages/codigos/list.html" id="cancel" styleClass="boton_rojo" title="#{common['button.cancel']}" immediate="true" rendered="#{!codigoFormAction.codigoForm.readMode}">
													<span><h:outputText value="#{common['button.cancel']}" /></span>
											    </h:outputLink>
											    <h:outputLink value="/librae-adminconfig/pages/codigos/list.html" id="back" styleClass="boton_rojo" title="#{common['button.back']}" immediate="true" rendered="#{codigoFormAction.codigoForm.readMode}">
													<span><h:outputText value="#{common['button.back']}" /></span>
											    </h:outputLink>
											    <t:commandLink action="#{codigoFormAction.editable}" id="editable" styleClass="boton" title="#{common['button.edit']}" immediate="true" rendered="#{codigoFormAction.codigoForm.readMode}" visibleOnUserRole="ADM_Mantenimiento_Codigo">
													<span><h:outputText value="#{common['button.edit']}" /></span>
												</t:commandLink>
											    <h:commandLink action="#{codigoFormAction.saveCodigo}" id="saveAceptar" styleClass="boton" title="#{common['button.done']}" rendered="#{!codigoFormAction.codigoForm.readMode}">
													<span> <h:outputText value="#{common['button.done']}" /> </span>
												</h:commandLink>
												<h:commandLink action="#{codigoFormAction.saveCodigoGuardar}" id="save" styleClass="boton" title="#{common['button.save']}" rendered="#{!codigoFormAction.codigoForm.readMode}">
													<span> <h:outputText value="#{common['button.save']}" /> </span>
												</h:commandLink>
											</h:panelGroup>
										</f:facet>
									</t:panelGrid>
								</t:div>
							</t:div>

							<h:panelGroup>
								<t:div id="subpestana1">
									<t:div styleClass="listado">
										<t:panelGrid columns="1" styleClass="border_subpest">
											<t:panelGrid columns="3" styleClass="subpestanas" border="0" cellpadding="0" cellspacing="0" columnClasses="blank,titulo_activa,blank">
												<h:graphicImage value="/images/sp01a.gif" />
												<h:outputText value="#{msg['gestionCodigosSearch.resultados']}" />
												<h:graphicImage value="/images/sp02a.gif" />
											</t:panelGrid>
										</t:panelGrid>
										<t:panelGrid columns="2" styleClass="botones">
											<t:panelGrid>
												<t:commandLink action="#{codigoFormAction.updateCodigo}" id="add" styleClass="btn_barra" visibleOnUserRole="ADM_Mantenimiento_Codigo"
													rendered="#{!codigoFormAction.codigoForm.readMode}" title="#{common['button.add']}">
													<span>
														<h:outputText value="#{common['button.add']}" />
													</span>
												</t:commandLink>
											</t:panelGrid>
											<t:panelGroup styleClass="botonfinal">
													<h:commandButton action="#{codigoFormAction.generarPdf}" immediate="true" styleClass="imprimir" title="#{common['button.pdf']}" image="/images/pdf_icon.gif" alt="#{common['button.pdf']}" />
													<h:commandButton action="#{codigoFormAction.generarExcel}" immediate="true" styleClass="imprimir" title="#{common['button.excel']}" image="/images/hoja_calculo_icon.gif" alt="#{common['button.excel']}" />

													<t:selectOneMenu id="factorPaginacion" forceId="true"
														styleClass="combo_paginacion" onchange="document.getElementById('_viewRoot:status.start').style.display='';return oamSubmitForm('codigoForm','codigoForm:cambiarPaginacion');"
														value="#{codigoFormAction.pageSize}">
														<f:selectItem itemValue="10" itemLabel="10" />
														<f:selectItem itemValue="20" itemLabel="20" />
														<f:selectItem itemValue="30" itemLabel="30" />
														<f:selectItem itemValue="50" itemLabel="50" />
														<!-- f:selectItem itemValue="-1" itemLabel="Todos" / -->
													</t:selectOneMenu>
													<t:commandLink action="#{codigoFormAction.modificarPageSize}"
															id="cambiarPaginacion" style="display:none;">
															<h:outputText value="." />
													</t:commandLink>
											</t:panelGroup>
										</t:panelGrid>

										<ui:include src="/pages/codigos/valores/dataTable.xhtml">
											<ui:param name="bean" value="#{codigoFormAction}"/>
										</ui:include>

										<ui:include src="/common/paginatorAjaxSession.xhtml">
											<ui:param name="bean" value="#{codigoFormAction}" />
											<ui:param name="idListado" value="valores" />
											<ui:param name="idPageSize" value="$F('factorPaginacion')" />
										</ui:include>

									</t:div>
								</t:div>
							</h:panelGroup>
						</t:div>
					</t:div>

					<t:div styleClass="pie_pestana">
						<t:panelGrid columns="3" columnClasses="blank,blanco,blank" cellpadding="0" cellspacing="0" border="0">
							<h:graphicImage value="/images/pie01.gif" />
								<h:outputText value="" />
							<h:graphicImage value="/images/pie02.gif" />
						</t:panelGrid>
					</t:div>

				</t:div>

				<t:div id="divConfirmacionBorrar" style="display: none;">
					<s:modalDialog  dialogId="dialogo2"  dialogVar="dialogo1Var"
						      dialogAttr="bgColor='white' bgOpacity='0.5' toggle='fade' toggleDuration='50'"
						      hiderIds="btnCerrar">
					        <t:panelGrid border="0" columns="1" styleClass="ventanaEmergente">
						    	<t:outputText id="msg"  value="#{msg['confirmacion.codigo']}" style="text-align:center;"/>
						    	<t:panelGroup>
						        	<t:panelGrid border="0" columns="2">
								        <t:commandLink action="#{codigoFormAction.deleteCodigo}" id="editD" immediate="true" styleClass="btn_barra">
											<t:htmlTag value="span"><h:outputText value="#{common['button.remove']}" /></t:htmlTag>
										</t:commandLink>
								       	<t:commandButton id="btnCerrar" forceId="true" onclick="dialogo1Var.hide();" styleClass="btn_barra_cerrar" value="#{common['button.cancel']}"/>
						        	</t:panelGrid>
					        	</t:panelGroup>
					        </t:panelGrid>
					</s:modalDialog>
				</t:div>

			</h:form>

			<librae:windowMessages bean="#{codigoFormAction}" borrar="true" />

			<script type="text/javascript">
				//<![CDATA[

   				verAplica();

    			//]]>
    		</script>

		</f:view>
	</ui:define>
</ui:composition>
</html>
