<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:librae="http://www.librae.org/jsf/facelets">

	<head>
		<script type="text/javascript">
		<!--
			function cargarRol(event) {
				var clickFunction= "A4J.AJAX.Submit('_viewRoot','usuarioFormAction',event,{'parameters':{'usuarioFormAction:seleccionarRol':'usuarioFormAction:seleccionarRol'},'actionUrl':'/librae-adminconfig/pages/usuario/form.html'})";
		        try {
			        eval(clickFunction);
		        } catch (e) {
			    }
		        return;
			}
			function limpiarRol(event) {
				var clickFunction= "A4J.AJAX.Submit('_viewRoot','usuarioFormAction',event,{'parameters':{'usuarioFormAction:limpiarRoles':'usuarioFormAction:limpiarRoles'},'actionUrl':'/librae-adminconfig/pages/usuario/form.html'})";
		        try {
			        eval(clickFunction);
		        } catch (e) {
			    }
		        return;
			}
		-->
		</script>
	</head>

	<librae:subTabListado
				binding="#{usuarioFormAction.usuarioForm.subTabRoles}">

		<t:panelGrid columns="2" styleClass="botones">
			<t:panelGroup rendered="#{!usuarioFormAction.usuarioForm.readMode}">
				<span class="btn_barra"> <t:selectBooleanCheckbox
					styleClass="btn_st" forceId="true" id="selectAll"
					value="#{usuarioBibliotecaRolSearchSessionAction.selectedAll}"
					onclick="actualizarSeleccionTodos(this, 'rolesAsignados', 'selectAllPage');" />
				<em id="btn_st1"><h:outputText
					value="#{common['button.selectAll']}" /></em> <em
					style="display: none;" id="btn_st2"><h:outputText
					value="#{common['button.deselectAll']}" /></em> </span>

				<h:outputLink id="asignar" styleClass="btn_barra" value="#" title="#{msg['asignarPerfiles.asignar']}"
					onclick="javascript:abrirVentana('/librae-adminconfig/pages/rol/listLocalizador.html' , 65 , 30 , 'ventana', 'Localizar roles no asignados'); return false;">
					<strong><h:outputText value="#{msg['asignarPerfiles.asignar']}" /></strong>
				</h:outputLink>

				<a4j:commandLink reRender="rolesAsignados, paginacion" id="desasignar" styleClass="btn_barra" action="#{usuarioBibliotecaRolSearchSessionAction.desasignar}" title="#{msg['asignarPerfiles.desasignar']}" immediate="true">
					<span><h:outputText value="#{msg['asignarPerfiles.desasignar']}" /></span>
				</a4j:commandLink>
			</t:panelGroup>
			<t:panelGroup styleClass="botonfinal">
				<h:commandButton action="#{usuarioBibliotecaRolSearchSessionAction.generarPdf}" immediate="true" styleClass="imprimir" title="#{common['button.pdf']}" image="/images/pdf_icon.gif" alt="#{common['button.pdf']}" />
				<h:commandButton action="#{usuarioBibliotecaRolSearchSessionAction.generarExcel}" immediate="true" styleClass="imprimir" title="#{common['button.excel']}" image="/images/hoja_calculo_icon.gif" alt="#{common['button.excel']}" />
				<t:selectOneMenu id="factorPaginacion" forceId="true"
					styleClass="combo_paginacion" onchange="document.getElementById('_viewRoot:status.start').style.display='';return oamSubmitForm('usuarioFormAction','usuarioFormAction:cambiarPaginacion');"
					value="#{usuarioBibliotecaRolSearchSessionAction.pageSize}" >
					<f:selectItem itemValue="10" itemLabel="10" />
					<f:selectItem itemValue="20" itemLabel="20" />
					<f:selectItem itemValue="30" itemLabel="30" />
					<f:selectItem itemValue="50" itemLabel="50" />
				</t:selectOneMenu>
				<t:commandLink action="#{usuarioBibliotecaRolSearchSessionAction.modificarPageSize}" onclick="document.getElementById('_viewRoot:status.start').style.display='';"
					id="cambiarPaginacion" style="display:none;">
					<h:outputText value="." />
				</t:commandLink>
			</t:panelGroup>
		</t:panelGrid>

		<ui:include src="/pages/usuarioBibliotecaRol/dataTable.xhtml">
			<ui:param name="bean" value="#{usuarioBibliotecaRolSearchSessionAction}" />
			<ui:param name="idListado" value="rolesAsignados" />
			<ui:param name="readMode" value="#{usuarioFormAction.usuarioForm.readMode}" />
		</ui:include>

		<ui:include src="/common/paginatorAjaxSession.xhtml">
			<ui:param name="bean" value="#{usuarioBibliotecaRolSearchSessionAction}" />
			<ui:param name="idListado" value="rolesAsignados" />
			<ui:param name="idPageSize" value="$F('factorPaginacion')" />
		</ui:include>

		<h:panelGroup>
			<ui:include src="/pages/usuario/include/botonera.xhtml">
				<ui:param name="idBotonera" value="roles" />
			</ui:include>
		</h:panelGroup>

		<a4j:commandLink reRender="rolesAsignados, paginacion" id="seleccionarRol" action="#{rolAction.asignarUsuario}" immediate="true" style="display:none;">
		</a4j:commandLink>

		<a4j:commandLink id="limpiarRoles" action="#{usuarioBibliotecaRolSearchSessionAction.limpiarSeleccionados}" style="display:none;" immediate="true">
		</a4j:commandLink>

	</librae:subTabListado>

</html>
